# 架构设计审查交互格式

**使用角色**: Skeptic、Prometheus  
**用途**: 架构设计的多轮审查交互

---

## 审查流程概览

```
Prometheus 提交设计
        ↓
Skeptic 第1轮审查 → 提出问题
        ↓
Prometheus 回复 → 修正设计
        ↓
Skeptic 评估 → 决定是否继续审查
        ↓
   [继续]    [通过]    [僵局]
      ↓         ↓         ↓
  第2轮    进入下一阶段   寻求用户决策
```

---

## 第1轮：Skeptic 初始审查

### 审查报告格式

```markdown
# 架构设计审查报告 - 第1轮

## 审查信息
- **审查对象**: [架构设计文档链接]
- **审查轮次**: 第1轮
- **审查时间**: [日期]
- **审查状态**: [进行中]

## 审查摘要
- **问题总数**: [N] 个
- **严重问题**: [N] 个 🔴
- **一般问题**: [N] 个 🟡
- **建议**: [N] 个 🟢

---

## 🔴 严重问题（必须解决）

### 问题 1: [问题标题]
- **位置**: [文档章节/段落]
- **问题描述**: [具体问题]
- **影响分析**: [不解决的后果]
- **改进建议**: [具体建议]
- **参考依据**: [相关规范/最佳实践]

### 问题 2: [问题标题]
...

---

## 🟡 一般问题（建议解决）

### 问题 3: [问题标题]
- **位置**: [文档章节/段落]
- **问题描述**: [具体问题]
- **改进建议**: [具体建议]

---

## 🟢 建议（可选采纳）

### 建议 1: [建议标题]
- **描述**: [具体建议]
- **理由**: [采纳的好处]

---

## 审查结论

基于以上问题，建议：
- [ ] Prometheus 回复并修正设计（进入第2轮审查）
- [ ] 直接进入下一阶段（如问题较轻微）

**下一轮审查重点**: [如适用，说明重点关注的问题]
```

---

## 第2-N轮：Prometheus 回复

### Prometheus 回复格式

```markdown
# 架构设计审查回复 - 第[N]轮

## 回复信息
- **回复对象**: [审查报告链接]
- **回复轮次**: 第[N]轮
- **回复时间**: [日期]

---

## 🔴 严重问题回复

### 问题 1: [问题标题]

**Skeptic 质疑**:
[引用 Skeptic 的问题描述]

**Prometheus 分析与回复**:
1. **问题分析**: [对问题的理解和分析]
2. **解决方案**: [具体的修正措施]
3. **修正内容**: [设计文档的具体修改]

**修正后的设计**:
```
[修正后的伪代码/接口定义]
```

---

### 问题 2: [问题标题]
...

---

## 🟡 一般问题回复

### 问题 3: [问题标题]

**Skeptic 质疑**:
[引用]

**Prometheus 回复**:
[回复内容]

**修正措施**:
[具体修改]

---

## 🟢 建议采纳情况

### 建议 1: [建议标题]
- [x] 已采纳 → [具体实施]
- [ ] 未采纳 → [理由说明]

---

## 设计变更汇总

| 章节 | 变更前 | 变更后 | 变更原因 |
|------|--------|--------|----------|
| [章节] | [内容] | [内容] | [原因] |

---

## 回复结论

- [ ] 所有严重问题已解决，请求 Skeptic 再次审查
- [ ] 部分问题存在争议，需要进一步讨论
- [ ] 无法解决某些问题，需要用户决策
```

---

## 第2-N轮：Skeptic 再次审查

### 再次审查报告格式

```markdown
# 架构设计审查报告 - 第[N]轮

## 审查信息
- **审查对象**: [Prometheus 回复链接]
- **审查轮次**: 第[N]轮
- **审查时间**: [日期]

## 上轮问题回顾

### 问题 1: [问题标题]
- **上轮状态**: 🔴 严重问题
- **Prometheus 回复**: [简要总结]
- **本轮评估**: [已解决/部分解决/未解决]
- **评估理由**: [详细说明]

---

## 本轮新发现问题

### 新问题 1: [问题标题]
- **位置**: [文档位置]
- **问题描述**: [具体问题]
- **严重程度**: [🔴严重/🟡一般/🟢建议]
- **改进建议**: [具体建议]

---

## 审查结论

### 问题统计
- **已解决**: [N] 个
- **部分解决**: [N] 个
- **未解决**: [N] 个
- **新问题**: [N] 个

### 决策建议
- [ ] **继续审查**（第[N+1]轮）→ 还有重要问题需要解决
- [ ] **审查通过** → 设计已完善，可以进入下一阶段
- [ ] **陷入僵局** → Prometheus 无法回复或双方观点冲突，需要用户决策

### 如继续审查
**重点关注**: [下一轮需要重点审查的内容]

### 如陷入僵局
**僵局原因**: [简要说明]
**双方观点**: [Skeptic 观点 vs Prometheus 观点]
**建议的用户决策**: [具体的决策选项]
```

---

## 僵局处理：用户决策请求

### 决策请求格式

```markdown
🤔 **架构设计审查僵局 - 需要用户决策**
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
❓ **争议焦点**: [简要描述争议内容]
📊 **审查轮次**: 第 [N] 轮
🔍 **僵局原因**: [为什么陷入僵局]
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

## 争议背景

**设计内容**: [简要描述设计的核心内容]

**审查历史**:
- 第1轮：[主要问题]
- 第2轮：[主要问题]
- ...
- 第N轮：[当前僵局]

## 双方观点

### Skeptic 观点
**质疑理由**:
- [理由1]
- [理由2]

**潜在风险**:
- [风险1]
- [风险2]

**建议方案**:
[具体建议]

### Prometheus 观点
**设计理由**:
- [理由1]
- [理由2]

**技术约束**:
- [约束1]
- [约束2]

**反对 Skeptic 建议的理由**:
[具体理由]

## 可选决策方案

### 方案 A: 采纳 Skeptic 建议
- **描述**: [具体做法]
- **优点**: [优点]
- **缺点**: [缺点]
- **影响**: [对项目的影响]

### 方案 B: 采纳 Prometheus 方案
- **描述**: [具体做法]
- **优点**: [优点]
- **缺点**: [缺点]
- **风险**: [需要接受的风险]

### 方案 C: 折中方案
- **描述**: [具体做法]
- **平衡**: [如何平衡双方观点]

### 方案 D: 重新设计
- **描述**: [重新设计的范围]
- **成本**: [时间/资源成本]

## 推荐方案

**推荐**: [方案A/B/C/D]

**推荐理由**:
[详细说明]

---

**请用户选择**:
- [ ] 方案 A: 采纳 Skeptic 建议
- [ ] 方案 B: 采纳 Prometheus 方案
- [ ] 方案 C: 折中方案（请描述）
- [ ] 方案 D: 重新设计
- [ ] 其他方案（请描述）

**决策后行动**:
- 如选择 A/B/C: Prometheus 按决策修正设计，Skeptic 快速确认后进入下一阶段
- 如选择 D: 返回 Prometheus 重新设计，重新开始审查流程
```

---

## 审查通过：进入下一阶段

### 审查通过报告

```markdown
✅ **架构设计审查通过**
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🎉 **审查结果**: 通过
📊 **审查轮次**: 共 [N] 轮
📅 **完成时间**: [日期]
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

## 审查总结

**设计质量**: [优秀/良好/合格]

**解决的问题**:
- [问题1]: [简要说明]
- [问题2]: [简要说明]

**采纳的建议**:
- [建议1]: [简要说明]

**遗留风险**（如有）:
- [风险1]: [说明及缓解措施]

## 设计文档

- **最终版本**: [文档链接]
- **变更历史**: [变更记录链接]

## 下一步

进入 **Oracle 实现设计阶段**

Oracle 应关注：
- [要点1]
- [要点2]
```

---

## 快速参考

### 审查轮次判断

| 情况 | 建议行动 |
|------|----------|
| 第1轮，问题较多 | 继续第2轮 |
| 第2轮，问题减少 | 继续第3轮或视情况通过 |
| 第3轮，仍有严重问题 | 评估是否陷入僵局 |
| 第N轮，问题反复 | 可能陷入僵局，准备用户决策 |
| Prometheus 无法回复 | 直接寻求用户决策 |

### 严重程度定义

| 级别 | 定义 | 处理要求 |
|------|------|----------|
| 🔴 严重 | 影响功能实现、性能、安全 | 必须解决 |
| 🟡 一般 | 影响代码质量、可维护性 | 建议解决 |
| 🟢 建议 | 优化建议、可选改进 | 可选采纳 |

---

👉 [返回参考文档首页](../index.md)
