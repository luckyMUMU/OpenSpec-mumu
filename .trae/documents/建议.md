SOP 优化建议

依据与范围





依据：reviews/2026-02-13_system_audit_v2.1 的 02_issue_list、04_version_check、05_review_report；sop_GUIDE.md 的版本规则与表达规范。



范围：docs/参考/sop/**（入口、矩阵、约束、参考索引、Skill 合约、Prompt Pack、审查流程）。



一、基于审查结论的必做/高优先级优化

1.1 统一主/次版本为 v2.1.0





现状：CHANGELOG 为 v2.1.0，但约 50+ 核心文档与 16 个 SKILL、prompts/packs/default 下全部文件仍为 v2.0.0，违反指南 §3.3。



建议：按 04_version_check.md 逐文件将 frontmatter version 更新为 v2.1.0。可先做核心 SSOT（02_skill_matrix、04_reference/index、05_constraints/constraint_matrix、各 skills/*/SKILL.md），再做 04_reference 子文档与 prompts/packs。



产出：一次“v2.1.0 发布基线”，便于后续修订版本差异化时主/次仍一致。

1.2 表达规范：消除含混词（低优先级但可分批做）





现状：02_issue_list 已标注 sop-tdd-workflow、sop-capability-reuse、sop-code-review 中的“建议”“可能”等表述。



建议：在 sop-tdd-workflow/SKILL.md 将“建议落地到”“建议启用 TDD”改为“仅当…时 → 必须…”或显式标注“可选推荐”；在 sop-capability-reuse/SKILL.md 将“如可能，优先改进”改为“当满足改进条件时 → 必须优先改进；否则 → …”。符合指南 §5.5（触发条件、动作、输出）。



二、可维护性优化

2.1 版本号维护流程





现状：版本号分散在 80+ 个 md 的 frontmatter 中，主/次变更时易漏改。



建议：





在 sop_GUIDE.md 或 CHANGELOG.md 中增加“发布基线检查清单”：发布前运行“主/次版本一致性”检查（可基于 04_version_check 表格生成脚本：扫描 sop 下所有带 version: 的 md，与 CHANGELOG 主/次比对）。



或引入轻量脚本/CI：列出 version: 与 CHANGELOG 不一致的文件，不自动改内容，仅报错或生成 04_version_check 表，供人工修复。

2.2 审查节奏固化





建议：在 reviews/index.md 或项目 README 中约定“每次主/次版本发布前按 sop_GUIDE 执行一次六步审查并落盘 reviews/YYYY-MM-DD_

”，避免版本与 SSOT 长期漂移。



三、可发现性与索引

3.1 04_reference/index 审查标准表





现状：04_reference/index.md 的“审查标准”表仅列 4 条（context_handoff、index、source_dependency、test_code），其余标准（architecture_design、implementation_design、adr、code_diff、test_design、review_report）通过 review_standards/index.md 可达。



建议：二选一即可满足“新增模板/标准可达”（指南 §8.3）：(1) 保持现状，在 04_reference/index 审查标准小节增加一句“全量标准见 review_standards/index.md”；(2) 或在 04_reference/index 审查标准表中增加上述其余标准的链接行，便于从单一入口直达。推荐 (1)，避免两处重复维护。

3.2 入口跳数





现状：AGENT_SOP 已约定“到任意 SOP 文档最短跳数 ≤3”，且仅提供摘要与链接、不复制正文，符合渐进披露。



建议：无强制改动；若后续新增顶层文档，继续遵守“入口只链不抄、子文档按需加载”。



四、表达与可执行性（中长期）

4.1 Skill 合约撰写规范





建议：在 sop_GUIDE.md 或 02_skill_matrix/index.md 中增加“Skill 合约自检清单”（可选）：每条规则是否包含“触发条件 → 动作 → 输出/落盘”；是否避免“建议/尽量/可能/一般/视情况/差不多”；停止点是否引用 state_dictionary。便于新增/修订 Skill 时自检，减少后续审查中的 🟡 项。

4.2 规则格式模板





建议：在 04_reference 下增加一页“规则表述模板”（或合并进 prompt_pack.standard 的附录）：给出“仅当…时 → 必须… → 输出（路径/交付物）”的 1～2 个范例，供 SKILL 与约束文档参考，统一命令式风格。



五、流程与自动化（可选）

5.1 链接检查





现状：审查中已发现 03_workflow 状态机链接错误并修复；其余核心链接手查通过。



建议：若有 CI，可增加一步“Markdown 相对链接存在性检查”（仅限 sop 目录），对 ](path) 中的 path 做存在性校验，减少类似 ../../参考/sop_state_machine.md 的路径笔误。

5.2 版本与 SSOT 检查





建议：将“主/次版本一致性”“SSOT 引用仅来自字典/矩阵”抽象为可执行检查（脚本或 CI），在每次 PR 或发布前运行，与 04_version_check、01_ssot_check 的结论对齐，避免人工漏改。



六、可选的结构精简（不改变语义）

6.1 重复信息





现状：指南 §5.6 要求“重复信息合并为 SSOT 引用或表格”。当前 state_dictionary、command_dictionary、constraint_matrix 与各 Skill 的停止点/命令引用已收敛，未发现大块重复。



建议：若某处出现“大段复制字典/矩阵”的段落，改为“见 state_dictionary §…”或表格引用，保持单源。

6.2 Review 与 Review 目录





现状：存在 reviews/ 与 Review/ 两套审查归档，命名与日期格式不统一。



建议：统一以 reviews/YYYY-MM-DD_<topic> 为规范，将 Review/20260212 在 reviews/index 中保留入口并注明“历史归档”，新审查仅落盘 reviews/，避免新人困惑。



七、建议实施顺序

flowchart LR
  A[1.版本统一v2.1] --> B[2.表达含混词修正]
  B --> C[3.索引说明与审查节奏]
  C --> D[4.自检清单与规则模板]
  D --> E[5.可选CI与结构统一]





先做：版本统一（1.1）、索引审查标准一句说明（3.1）。



分批做：含混词与规则格式（1.2、4.1/4.2）、发布前版本检查清单或脚本（2.1）、审查节奏约定（2.2）。



按需做：链接/版本 CI（5.1/5.2）、Review 目录统一（6.2）。

以上均不改变 SOP 业务语义与 SSOT 边界，仅提升一致性、可发现性与可维护性。